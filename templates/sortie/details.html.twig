{% extends 'base.html.twig' %}

{% block title %}{{ sortie.nom }}{% endblock %}
{% block titrepage %}
    <div class="title-container">
        <h1>{{ sortie.nom }}</h1>
    </div>
{% endblock %}
{% block body %}
    <h1>{{ sortie.nom }}</h1>
    <div>
        <p>Lieu: {{ sortie.lieu.nom }}</p>
        <p>Durée: {{ sortie.duree }}</p>
        {% if (sortie.dateLimiteInscription > today) %}
        <p>Date limite d'inscription: {{ sortie.dateLimiteInscription | format_datetime('full', 'short', locale='fr') | capitalize}}</p>
        {% else %}
        <p>Inscriptions cloturées</p>
        {% endif %}
        <p>Concernant la sortie: {{ sortie.infosSortie }}</p>
    </div>
    <br>
    <div>
        <h2>Liste des participants</h2><br>
        <div>
        <ul>
        {% set userIsParticipant = false %}
        {% for participant in sortie.participants %}
            {% if app.user == participant %}
                {% set userIsParticipant = true %}
            {% endif %}
            <li><a href="{{ path('app_profil', {'id' :participant.id}) }}">{{ participant.firstname }} {{ participant.lastname }}</a></li><br>
        {% endfor %}
        </ul>
            <p>Nombre de participants: {{ sortie.participants | length }}</p>
        </div><br>
        {% if userIsParticipant %}
            <a href="{{ path('sortie_desister', {'id' : sortie.id}) }}">Se désister</a>
        {% else %}
            <a href="{{ path('sortie_inscription', {'id': sortie.id}) }}" title="Inscription">S'inscrire</a>
        {% endif %}

    </div>
{% endblock %}

